{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
  Expenses
{% endblock %}

{% block head %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'expenses_style.css' %}">
<script src="{% static 'expenses_app.js' %}"></script>
{% endblock %}

{% block sections %}
<section id="content">
  <div class="container">
    <div class="card">
      <div class="pm-body clearfix">
        <!-- Navigation Tab -->
        <ul class="tab-nav tn-justified">
          <li class="waves-effect"><a href="{% url 'req_expenses_calendar' %}">Calendar</a></li>
          <li class="active waves-effect"><a>Report</a></li>
        </ul>
        <div class="pmb-block">
          <div class="listview lv-bordered lv-lg">
            <!-- Control Bar -->
            <div class="lv-header-alt clearfix">
              <ul class="lv-actions actions">
                <li><a data-toggle="modal" href="#expense-detail" onclick="addExpense()"><i class="zmdi zmdi-plus-circle"></i></a></li>
              </ul>
              <ul class="lv-actions actions">
                <li><a onclick="addExpense()"><i class="zmdi zmdi-calendar-check"></i></a></li>
              </ul>
              <h2 class="lvh-label hidden-xs pull-right">Year and Month here</h2>
            </div>
            <!-- Expense Report -->
            <div id="expense-report">
              <canvas id="year-expense-chart" width="400" height="100"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block modals %}
<!-- Important Expense Modal -->
<div class="modal fade" id="important-expense" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <!--Need to be built -->
    </div>
  </div>
</div>
<!-- Extra Expense Modal -->
<div class="modal fade" id="extra-expense" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <!--Need to be built -->
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
var expense_report_html = "{% static 'html/expense-report.html' %}";

$(document).ready(function() {
  var context = {month_total: 2500, tags: [{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500},{id: 1, name: "food", icon: "fa fa-cutlery", amount: 500}]};
  $("#expense-report").html(renderTemplate(expense_report_html, context));
  loadMonthExpenseChart();
  loadYearExpenseChart();
});

</script>

<script>

function loadMonthExpenseChart() {
  var ctx = document.getElementById("month-expense-chart");
  var myChart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
          datasets: [{
              label: 'Day Total',
              data: [500, 19, 300, 5, 2, 3],
              backgroundColor: [
                  'rgba(54, 162, 235, 0.2)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          }
      }
  });
}

function loadYearExpenseChart() {
  var ctx = document.getElementById("year-expense-chart");
  var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
          datasets: [{
              label: 'Month Total',
              data: [500, 19, 3, 5, 2, 3],
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                  'rgba(255,99,132,1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
                  'rgba(153, 102, 255, 1)',
                  'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          }
      }
  });
}
</script>
{% endblock %}
